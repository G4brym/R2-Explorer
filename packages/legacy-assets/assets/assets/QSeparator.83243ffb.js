import{q as T,ap as te,s as J,n as W,z as q,N as X,t as V,P as Z,au as le,x as B,ai as ne,V as N,a4 as _,a7 as oe,v as U,av as L,f as ee,B as ae,L as ie,j as I,aw as re,ax as se,ay as ue,Y as ce,h as S}from"./index.7b40bbd4.js";import{b as O,c as de}from"./focus-manager.1ddae684.js";import{c as fe}from"./scroll.729e661d.js";import{api as b}from"./axios.c4f749e1.js";import{u as me}from"./main-store.718cb995.js";import{u as he,a as pe}from"./use-dark.5b3707da.js";const Be={modelValue:{type:Boolean,default:null},"onUpdate:modelValue":[Function,Array]},Ae=["beforeShow","show","beforeHide","hide"];function Fe({showing:e,canShow:t,hideOnRouteChange:l,handleShow:n,handleHide:o,processOnMount:u}){const a=W(),{props:c,emit:s,proxy:d}=a;let i;function y(m){e.value===!0?f(m):g(m)}function g(m){if(c.disable===!0||m!==void 0&&m.qAnchorHandled===!0||t!==void 0&&t(m)!==!0)return;const h=c["onUpdate:modelValue"]!==void 0;h===!0&&(s("update:modelValue",!0),i=m,q(()=>{i===m&&(i=void 0)})),(c.modelValue===null||h===!1)&&r(m)}function r(m){e.value!==!0&&(e.value=!0,s("beforeShow",m),n!==void 0?n(m):s("show",m))}function f(m){if(c.disable===!0)return;const h=c["onUpdate:modelValue"]!==void 0;h===!0&&(s("update:modelValue",!1),i=m,q(()=>{i===m&&(i=void 0)})),(c.modelValue===null||h===!1)&&k(m)}function k(m){e.value!==!1&&(e.value=!1,s("beforeHide",m),o!==void 0?o(m):s("hide",m))}function x(m){c.disable===!0&&m===!0?c["onUpdate:modelValue"]!==void 0&&s("update:modelValue",!1):m===!0!==e.value&&(m===!0?r:k)(i)}T(()=>c.modelValue,x),l!==void 0&&te(a)===!0&&T(()=>d.$route.fullPath,()=>{l.value===!0&&e.value===!0&&f()}),u===!0&&J(()=>{x(c.modelValue)});const z={show:g,hide:f,toggle:y};return Object.assign(d,z),z}function Ve(){let e=null;const t=W();function l(){e!==null&&(clearTimeout(e),e=null)}return X(l),V(l),{removeTimeout:l,registerTimeout(n,o){l(),Z(t)===!1&&(e=setTimeout(()=>{e=null,n()},o))}}}function ve(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),le.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const ge={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},De={...ge,contextMenu:Boolean};function Re({showing:e,avoidEmit:t,configureAnchorEl:l}){const{props:n,proxy:o,emit:u}=W(),a=B(null);let c=null;function s(r){return a.value===null?!1:r===void 0||r.touches===void 0||r.touches.length<=1}const d={};l===void 0&&(Object.assign(d,{hide(r){o.hide(r)},toggle(r){o.toggle(r),r.qAnchorHandled=!0},toggleKey(r){ne(r,13)===!0&&d.toggle(r)},contextClick(r){o.hide(r),N(r),q(()=>{o.show(r),r.qAnchorHandled=!0})},prevent:N,mobileTouch(r){if(d.mobileCleanup(r),s(r)!==!0)return;o.hide(r),a.value.classList.add("non-selectable");const f=r.target;_(d,"anchor",[[f,"touchmove","mobileCleanup","passive"],[f,"touchend","mobileCleanup","passive"],[f,"touchcancel","mobileCleanup","passive"],[a.value,"contextmenu","prevent","notPassive"]]),c=setTimeout(()=>{c=null,o.show(r),r.qAnchorHandled=!0},300)},mobileCleanup(r){a.value.classList.remove("non-selectable"),c!==null&&(clearTimeout(c),c=null),e.value===!0&&r!==void 0&&ve()}}),l=function(r=n.contextMenu){if(n.noParentEvent===!0||a.value===null)return;let f;r===!0?o.$q.platform.is.mobile===!0?f=[[a.value,"touchstart","mobileTouch","passive"]]:f=[[a.value,"mousedown","hide","passive"],[a.value,"contextmenu","contextClick","notPassive"]]:f=[[a.value,"click","toggle","passive"],[a.value,"keyup","toggleKey","passive"]],_(d,"anchor",f)});function i(){oe(d,"anchor")}function y(r){for(a.value=r;a.value.classList.contains("q-anchor--skip");)a.value=a.value.parentNode;l()}function g(){if(n.target===!1||n.target===""||o.$el.parentNode===null)a.value=null;else if(n.target===!0)y(o.$el.parentNode);else{let r=n.target;if(typeof n.target=="string")try{r=document.querySelector(n.target)}catch{r=void 0}r!=null?(a.value=r.$el||r,l()):(a.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return T(()=>n.contextMenu,r=>{a.value!==null&&(i(),l(r))}),T(()=>n.target,()=>{a.value!==null&&i(),g()}),T(()=>n.noParentEvent,r=>{a.value!==null&&(r===!0?i():l())}),J(()=>{g(),t!==!0&&n.modelValue===!0&&a.value===null&&u("update:modelValue",!1)}),V(()=>{c!==null&&clearTimeout(c),i()}),{anchorEl:a,canShow:s,anchorEvents:d}}function Qe(e,t){const l=B(null);let n;function o(c,s){const d=`${s!==void 0?"add":"remove"}EventListener`,i=s!==void 0?s:n;c!==window&&c[d]("scroll",i,U.passive),window[d]("scroll",i,U.passive),n=s}function u(){l.value!==null&&(o(l.value),l.value=null)}const a=T(()=>e.noParentEvent,()=>{l.value!==null&&(u(),t())});return V(a),{localScrollTarget:l,unconfigureScrollTarget:u,changeScrollEvent:o}}const $=[];function Ue(e){return $.find(t=>t.contentEl!==null&&t.contentEl.contains(e))}function be(e,t){do{if(e.$options.name==="QMenu"){if(e.hide(t),e.$props.separateClosePopup===!0)return L(e)}else if(e.__qPortal===!0){const l=L(e);return l!==void 0&&l.$options.name==="QPopupProxy"?(e.hide(t),l):e}e=L(e)}while(e!=null)}function Ie(e,t,l){for(;l!==0&&e!==void 0&&e!==null;){if(e.__qPortal===!0){if(l--,e.$options.name==="QMenu"){e=be(e,t);continue}e.hide(t)}e=L(e)}}const ye=ee({name:"QPortal",setup(e,{slots:t}){return()=>t.default()}});function we(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function je(e,t,l,n){const o=B(!1),u=B(!1);let a=null;const c={},s=n==="dialog"&&we(e);function d(y){if(y===!0){O(c),u.value=!0;return}u.value=!1,o.value===!1&&(s===!1&&a===null&&(a=se(!1,n)),o.value=!0,$.push(e.proxy),de(c))}function i(y){if(u.value=!1,y!==!0)return;O(c),o.value=!1;const g=$.indexOf(e.proxy);g!==-1&&$.splice(g,1),a!==null&&(ue(a),a=null)}return ae(()=>{i(!0)}),e.proxy.__qPortal=!0,ie(e.proxy,"contentEl",()=>t.value),{showPortal:d,hidePortal:i,portalIsActive:o,portalIsAccessible:u,renderPortal:()=>s===!0?l():o.value===!0?[I(re,{to:a},I(ye,l))]:void 0}}function Ne(){let e;const t=W();function l(){e=void 0}return X(l),V(l),{removeTick:l,registerTick(n){e=n,q(()=>{e===n&&(Z(t)===!1&&e(),e=void 0)})}}}const{notPassiveCapture:A}=U,M=[];function F(e){const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let l=$.length-1;for(;l>=0;){const n=$[l].$;if(n.type.name==="QTooltip"){l--;continue}if(n.type.name!=="QDialog")break;if(n.props.seamless!==!0)return;l--}for(let n=M.length-1;n>=0;n--){const o=M[n];if((o.anchorEl.value===null||o.anchorEl.value.contains(t)===!1)&&(t===document.body||o.innerRef.value!==null&&o.innerRef.value.contains(t)===!1))e.qClickOutside=!0,o.onClickOutside(e);else return}}function _e(e){M.push(e),M.length===1&&(document.addEventListener("mousedown",F,A),document.addEventListener("touchstart",F,A))}function Oe(e){const t=M.findIndex(l=>l===e);t!==-1&&(M.splice(t,1),M.length===0&&(document.removeEventListener("mousedown",F,A),document.removeEventListener("touchstart",F,A)))}let G,K;function Ge(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Ke(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const j={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{j[`${e}#ltr`]=e,j[`${e}#rtl`]=e});function Ye(e,t){const l=e.split(" ");return{vertical:l[0],horizontal:j[`${l[1]}#${t===!0?"rtl":"ltr"}`]}}function Me(e,t){let{top:l,left:n,right:o,bottom:u,width:a,height:c}=e.getBoundingClientRect();return t!==void 0&&(l-=t[1],n-=t[0],u+=t[1],o+=t[0],a+=t[0],c+=t[1]),{top:l,bottom:u,height:c,left:n,right:o,width:a,middle:n+(o-n)/2,center:l+(u-l)/2}}function xe(e,t,l){let{top:n,left:o}=e.getBoundingClientRect();return n+=t.top,o+=t.left,l!==void 0&&(n+=l[1],o+=l[0]),{top:n,bottom:n+1,height:1,left:o,right:o+1,width:1,middle:o,center:n}}function Te(e,t){return{top:0,center:t/2,bottom:t,left:0,middle:e/2,right:e}}function Y(e,t,l,n){return{top:e[l.vertical]-t[n.vertical],left:e[l.horizontal]-t[n.horizontal]}}function $e(e,t=0){if(e.targetEl===null||e.anchorEl===null||t>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{$e(e,t+1)},10);return}const{targetEl:l,offset:n,anchorEl:o,anchorOrigin:u,selfOrigin:a,absoluteOffset:c,fit:s,cover:d,maxHeight:i,maxWidth:y}=e;if(ce.is.ios===!0&&window.visualViewport!==void 0){const C=document.body.style,{offsetLeft:P,offsetTop:w}=window.visualViewport;P!==G&&(C.setProperty("--q-pe-left",P+"px"),G=P),w!==K&&(C.setProperty("--q-pe-top",w+"px"),K=w)}const{scrollLeft:g,scrollTop:r}=l,f=c===void 0?Me(o,d===!0?[0,0]:n):xe(o,c,n);Object.assign(l.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:y,maxHeight:i,visibility:"visible"});const{offsetWidth:k,offsetHeight:x}=l,{elWidth:z,elHeight:m}=s===!0||d===!0?{elWidth:Math.max(f.width,k),elHeight:d===!0?Math.max(f.height,x):x}:{elWidth:k,elHeight:x};let h={maxWidth:y,maxHeight:i};(s===!0||d===!0)&&(h.minWidth=f.width+"px",d===!0&&(h.minHeight=f.height+"px")),Object.assign(l.style,h);const H=Te(z,m);let v=Y(f,H,u,a);if(c===void 0||n===void 0)D(v,f,H,u,a);else{const{top:C,left:P}=v;D(v,f,H,u,a);let w=!1;if(v.top!==C){w=!0;const E=2*n[1];f.center=f.top-=E,f.bottom-=E+2}if(v.left!==P){w=!0;const E=2*n[0];f.middle=f.left-=E,f.right-=E+2}w===!0&&(v=Y(f,H,u,a),D(v,f,H,u,a))}h={top:v.top+"px",left:v.left+"px"},v.maxHeight!==void 0&&(h.maxHeight=v.maxHeight+"px",f.height>v.maxHeight&&(h.minHeight=h.maxHeight)),v.maxWidth!==void 0&&(h.maxWidth=v.maxWidth+"px",f.width>v.maxWidth&&(h.minWidth=h.maxWidth)),Object.assign(l.style,h),l.scrollTop!==r&&(l.scrollTop=r),l.scrollLeft!==g&&(l.scrollLeft=g)}function D(e,t,l,n,o){const u=l.bottom,a=l.right,c=fe(),s=window.innerHeight-c,d=document.body.clientWidth;if(e.top<0||e.top+u>s)if(o.vertical==="center")e.top=t[n.vertical]>s/2?Math.max(0,s-u):0,e.maxHeight=Math.min(u,s);else if(t[n.vertical]>s/2){const i=Math.min(s,n.vertical==="center"?t.center:n.vertical===o.vertical?t.bottom:t.top);e.maxHeight=Math.min(u,i),e.top=Math.max(0,i-u)}else e.top=Math.max(0,n.vertical==="center"?t.center:n.vertical===o.vertical?t.top:t.bottom),e.maxHeight=Math.min(u,s-e.top);if(e.left<0||e.left+a>d)if(e.maxWidth=Math.min(a,d),o.horizontal==="middle")e.left=t[n.horizontal]>d/2?Math.max(0,d-a):0;else if(t[n.horizontal]>d/2){const i=Math.min(d,n.horizontal==="middle"?t.middle:n.horizontal===o.horizontal?t.right:t.left);e.maxWidth=Math.min(a,i),e.left=Math.max(0,i-e.maxWidth)}else e.left=Math.max(0,n.horizontal==="middle"?t.middle:n.horizontal===o.horizontal?t.left:t.right),e.maxWidth=Math.min(a,d-e.left)}const Je="IA==";function R(e,t){const l=new Date(e.uploaded);return{...e,hash:p(e.key),nameHash:p(e.key.replace(t,"")),name:e.key.replace(t,""),lastModified:ke(l),timestamp:l.getTime(),size:He(e.size),sizeRaw:e.size,type:"file",icon:"article",color:"grey"}}const ke=e=>{const t=Math.floor((new Date-e)/1e3);let l=t/31536e3,n;return l>1||(l=t/2592e3,l>1)||(l=t/86400,l>1)?e.toLocaleDateString():(l=t/3600,l>1?(n=Math.floor(l),n+(n===1?" hour":" hours")):(l=t/60,l>1?(n=Math.floor(l),n+(n===1?" minute":" minutes")):(n=Math.floor(l),n+(n===1?" second":" seconds"))))},He=e=>{const t=["Bytes","KB","MB","GB","TB"];if(e===0)return"0 Byte";const l=Number.parseInt(Math.floor(Math.log(e)/Math.log(1024)));return`${Math.round(e/1024**l,2)} ${t[l]}`},Xe=e=>Math.round(e/1024**2),p=e=>(e&&e!=="/"&&e.startsWith("/")&&(e=e.slice(1)),btoa(unescape(encodeURIComponent(e)))),Ze=e=>decodeURIComponent(escape(atob(e))),Pe={createFolder:(e,t)=>b.post(`/buckets/${t}/folder`,{key:p(e)}),deleteObject:(e,t)=>b.post(`/buckets/${t}/delete`,{key:p(e)}),downloadFile:(e,t,l,n,o)=>{const u={};return(l.downloadType==="objectUrl"||l.downloadType==="blob")&&(u.responseType="arraybuffer"),o&&(u.signal=o.signal),n&&(u.onDownloadProgress=n),b.get(`/buckets/${e}/${p(t)}`,u)},headFile:async(e,t)=>{let l="";t.includes("/")&&(l=t.replace(t.split("/").pop(),""));const n=await b.get(`/buckets/${e}/${p(t)}/head`);if(n.status===200)return R(n.data,l)},renameObject:(e,t,l)=>b.post(`/buckets/${e}/move`,{oldKey:p(t),newKey:p(l)}),updateMetadata:async(e,t,l)=>{let n="";t.includes("/")&&(n=t.replace(t.split("/").pop(),""));const o=await b.post(`/buckets/${e}/${p(t)}`,{customMetadata:l});if(o.status===200)return R(o.data,n)},multipartCreate:(e,t,l)=>b.post(`/buckets/${l}/multipart/create`,null,{params:{key:p(t),httpMetadata:p(JSON.stringify({contentType:e.type}))}}),multipartComplete:(e,t,l,n,o)=>b.post(`/buckets/${l}/multipart/complete`,{key:p(t),uploadId:o,parts:n}),multipartUpload:(e,t,l,n,o,u)=>b.post(`/buckets/${l}/multipart/upload`,o,{params:{key:p(n),uploadId:e,partNumber:t},onUploadProgress:u,headers:{"Content-Type":"multipart/form-data"}}),uploadObjects:(e,t,l,n)=>b.post(`/buckets/${l}/upload`,e,{params:{key:p(t),httpMetadata:p(JSON.stringify({contentType:e.type}))},headers:{"Content-Type":"multipart/form-data"},onUploadProgress:n}),listObjects:async(e,t,l="/",n=null)=>await b.get(`/buckets/${e}?include=customMetadata&include=httpMetadata`,{params:{delimiter:l,prefix:t&&t!=="/"?p(t):"",cursor:n}}),fetchFile:async(e,t,l="/")=>{const n=me();let o=!0,u=null;const a=[],c=[];for(;o;){const s=await Pe.listObjects(e,t,l,u);if(o=s.data.truncated,u=s.data.cursor,s.data.objects){const d=s.data.objects.filter(i=>!(i.key.endsWith("/")&&l!=="")&&i.key!==t).map(i=>R(i,t)).filter(i=>!(n.showHiddenFiles!==!0&&i.name.startsWith(".")));for(const i of d)a.push(i)}if(s.data.delimitedPrefixes){const d=s.data.delimitedPrefixes.map(i=>({name:i.replace(t,""),hash:p(i.key),key:i,lastModified:"--",timestamp:0,size:"--",sizeRaw:0,type:"folder",icon:"folder",color:"orange"})).filter(i=>!(n.showHiddenFiles!==!0&&i.name.startsWith(".")));for(const i of d)c.push(i)}}return[...c,...a]}},Ee={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Q={xs:2,sm:4,md:8,lg:16,xl:24};var et=ee({name:"QSeparator",props:{...he,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(e){const t=W(),l=pe(e,t.proxy.$q),n=S(()=>e.vertical===!0?"vertical":"horizontal"),o=S(()=>` q-separator--${n.value}`),u=S(()=>e.inset!==!1?`${o.value}-${Ee[e.inset]}`:""),a=S(()=>`q-separator${o.value}${u.value}`+(e.color!==void 0?` bg-${e.color}`:"")+(l.value===!0?" q-separator--dark":"")),c=S(()=>{const s={};if(e.size!==void 0&&(s[e.vertical===!0?"width":"height"]=e.size),e.spaced!==!1){const d=e.spaced===!0?`${Q.md}px`:e.spaced in Q?`${Q[e.spaced]}px`:e.spaced,i=e.vertical===!0?["Left","Right"]:["Top","Bottom"];s[`margin${i[0]}`]=s[`margin${i[1]}`]=d}return s});return()=>I("hr",{class:a.value,style:c.value,"aria-orientation":n.value})}});export{et as Q,Je as R,Ae as a,Ve as b,ve as c,Fe as d,Pe as e,Ze as f,De as g,Ke as h,Ne as i,Qe as j,Re as k,je as l,be as m,_e as n,Ue as o,Ye as p,Ie as q,Oe as r,$e as s,Xe as t,Be as u,Ge as v,p as w,ke as x,ge as y};
