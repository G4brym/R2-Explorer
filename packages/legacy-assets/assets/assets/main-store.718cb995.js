import{api as r}from"./axios.c4f749e1.js";import{d as i}from"./index.7b40bbd4.js";const l=i("main",{state:()=>({apiReadonly:!0,username:"",version:"",dashboardUrl:"",showHiddenFiles:!1,buckets:[]}),getters:{serverUrl(){return window.location.origin}},actions:{async loadUserDisks(){const s=await r.get("/buckets");return this.buckets=s.data.buckets,s.data.buckets},async loadServerConfigs(s,n=!1){var t,o;try{const e=await r.get("/server/config",{validateStatus:a=>a>=200&&a<300});this.apiReadonly=e.data.config.readonly,this.username=(t=e.data.config.user)==null?void 0:t.username,this.version=e.data.config.version,this.dashboardUrl=e.data.config.dashboardUrl,this.showHiddenFiles=e.data.config.showHiddenFiles}catch(e){if(console.log(e),e.response.status===302){const a=e.response.headers.Location;a&&window.location.replace(a)}if(n){if(((o=e.response)==null?void 0:o.status)===401){await s.push({name:"login",query:{next:s.currentRoute.value.fullPath}});return}}else throw e}}}});export{l as u};
